+function(n){"use strict";n.module("categoryApp",["ui.bootstrap"]).controller("CategoryCtrl",function(n,t){n.pageSize=20;n.totalItems=0;n.currentPage=1;n.category={};n.List=[];n.getList=function(){t({url:"/deviceCategory/getList",method:"POST",data:{pageSize:n.pageSize,pageIndex:n.currentPage}}).success(function(t){t.Success?(t.Data.length===0&&common.alert("未查到数据！"),n.List=t.Data,n.totalItems=t.TotalCount):common.alert(t.Message)}).error(function(){common.alert("出现错误或者网络异常！");n.List=[];n.totalItems=0})};n.getList();var i={categroyModal:$("#categoryModal")};n.categoryModal=function(){if(arguments.length!=0)for(var t=0;t<n.List.length;t++)if(n.List[t].ID==arguments[0]){n.category.ID=n.List[t].ID;n.category.Name=n.List[t].Name;n.category.Remark=n.List[t].Remark;break}i.categroyModal.modal("show")};n.delete=function(i,r){var u=$(r.target);if(!u.data("delete")){u.text("确定要删除吗");u.data("delete",!0).css({color:"red"});return}common.alert("正在删除...",function(){t.post("/deviceCategory/delete",{id:i}).success(function(t){t.Success?(common.alert("删除成功！"),n.getList()):(common.alert(t.Message),u.text("删除"),u.data("delete",!1).css({color:""}))}).error(function(){common.alert("出现错误或者网络异常！");n.List=[];n.totalItems=0})})};$("#btnCheck").ajaxClick({formSelector:"#categoryForm",onBefore:function(t){t.$form.attr("action","/deviceCategory/"+(n.category.ID?"update":"create"))},onCompleted:function(t,r){t.Success?(n.getList(),common.alert("保存成功"),i.categroyModal.modal("hide")):common.alert("保存失败："+t.Message);r.reset()}});i.categroyModal.on("hide.bs.modal",function(){n.category={}})})}(window.angular,document);