+function(n){"use strict";n.module("roleApp",["ui.bootstrap"]).controller("RoleCtrl",function(n,t){n.role={};n.List=[];n.getList=function(){t({url:"/role/getList",method:"GET"}).success(function(t){t.Success?(t.Data.length==0&&common.alert("未查到数据！"),n.List=t.Data):common.alert(t.Message)}).error(function(){common.alert("出现错误或者网络异常！");n.List=[]})};var i={roleModal:$("#roleModal"),roleForm:$("#roleForm")};n.roleModal=function(){if(arguments.length!=0)for(var t=0;t<n.List.length;t++)if(n.List[t].Id==arguments[0]){n.role.Id=n.List[t].Id;n.role.Name=n.List[t].Name;n.role.Remark=n.List[t].Remark;i.roleModal.find("#Id").val(n.role.Id);break}i.roleModal.modal("show")};n.delete=function(i,r){var u=$(r.target);if(!u.data("delete")){u.text("确定要删除吗");u.data("delete",!0).css({color:"red"});return}common.alert("正在删除...",function(){t.post("/role/delete",{id:i}).success(function(t){t.Success?(common.alert("删除成功！"),n.getList()):(common.alert(t.Message),u.text("删除"),u.data("delete",!1).css({color:""}))}).error(function(){common.alert("出现错误或者网络异常！")})})};$("#btnCreate").ajaxClick({formSelector:"#roleForm",onBefore:function(t){t.$form.attr("action","/role/"+(n.role.Id?"update":"create"))},onSuccess:function(t,r){r.reset();common.alert("保存成功！");i.roleModal.modal("hide");n.getList()},onFaild:function(n,t){t.reset();common.setValErrorMsg(t.$form,"Name",n.Message)}});i.roleModal.on("hidden.bs.modal",function(){n.role={}});n.getList()})}(window.angular,document);