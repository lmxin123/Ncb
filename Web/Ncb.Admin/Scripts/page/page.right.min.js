+function(n){"use strict";n.module("rightApp",[]).controller("RightCtrl",function(n,t){n.rights=[];n.getRight=function(){t({url:"/right/get",method:"POST",headers:{"Content-Type":undefined},transformRequest:function(){return new FormData(common.get("queryForm"))}}).success(function(t){t.Success?(t.Data.length===0&&common.alert("未查到数据！"),n.rights=t.Data):n.rights=[]}).error(function(){common.alert("网络异常或者请求出错了！");n.rights=[]})};$("#roleId").change(function(){n.getRight()});n.change=function(t,r,u){var e=$('input[data-role][data-index="['+t+","+r+']"'),f=e.data("role");if(f==="parent")for(r=0;r<n.rights[t].SubRightList.length;r++)i(t,r,u);else f==="sub"&&i(t,r,u);n.actionChange(t)};n.actionChange=function(t){for(var u=n.rights[t].SubRightList.length,f=u,i=0;i<u;i++)n.rights[t].SubRightList[i].Select!==null&&n.rights[t].SubRightList[i].Select||n.rights[t].SubRightList[i].Create!==null&&n.rights[t].SubRightList[i].Create||n.rights[t].SubRightList[i].Update!==null&&n.rights[t].SubRightList[i].Update||n.rights[t].SubRightList[i].Delete!==null&&n.rights[t].SubRightList[i].Delete||n.rights[t].SubRightList[i].Auditing!==null&&n.rights[t].SubRightList[i].Auditing?n.rights[t].All=n.rights[t].SubRightList[i].All=!0:(n.rights[t].SubRightList[i].All=!1,f--);u!==0&&(n.rights[t].All=f!==0);r()};var i=function(t,i,r){n.rights[t].SubRightList[i].Select!==null&&(n.rights[t].SubRightList[i].Select=r);n.rights[t].SubRightList[i].Create!==null&&(n.rights[t].SubRightList[i].Create=r);n.rights[t].SubRightList[i].Update!==null&&(n.rights[t].SubRightList[i].Update=r);n.rights[t].SubRightList[i].Delete!==null&&(n.rights[t].SubRightList[i].Delete=r);n.rights[t].SubRightList[i].Auditing!==null&&(n.rights[t].SubRightList[i].Auditing=r)},r=function(){t.post("/right/create",{roleId:$("#roleId").val(),roleJsonStr:JSON.stringify(n.rights)}).success(function(n){common.alert(n.Success?"数据己保存！":"保存失败："+n.Message)}).error(function(){common.alert("网络异常！")})}})}(window.angular,document);